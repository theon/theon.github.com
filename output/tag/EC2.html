<!DOCTYPE html>
<html lang="en">
<head>
        <title>Just Some <em>Dev</em> - EC2</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href=".././theme/css/main.css" type="text/css" />
        <link href=".././feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Just Some <em>Dev</em> ATOM Feed" />
        
        <link href=".././feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="Just Some <em>Dev</em> RSS Feed" />
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href=".././css/ie.css"/>
                <script src=".././js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href=".././css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

        <header id="banner" class="body">
                <h1><a href="../.">Just Some <em>Dev</em> </a></h1>
                <nav><ul>
                
                    <li><a href="/">Home</a></li>
                
                    <li><a href="/pages/todo.html">Todo</a></li>
                
                    <li><a href="/pages/about.html">About</a></li>
                
                
                
                </ul>


			<div class="logo">
				<!--<img src="theme/images/logos/bangheaddown.png" /> -->
			</div>

		</nav>
        </header><!-- /#banner -->
                

            

        
        
            <aside id="featured" class="body">
                <article>
                    <footer class="post-info">
        <h2 class="published" title="2012-04-01T00:00:00">
                01 Apr 2012
        </h2>

</span>

</footer><!-- /.post-info -->
                    <h1 class="entry-title"><a href=".././things-i-learnt-about-using-amazon-ec2.html">Things I learnt about using Amazon EC2</a></h1> 
                    <p>Amazon EC2 is pretty awesome. In under a minute you can fire up a server in the cloud and SSH in. The SSH access combined with the fact you can run your choice of OS, makes it much more flexible than other cloud platforms as a service, such as Heroku, Google App Engine and Cloud Foundry. The down side is that there is a lot more configuration to do, so it is probably going to take a little longer to deploy your app, than it would with Heroku.</p>
<p>I've used EC2 at work and have used it to deploy some small projects into production. Along the way I've compiled this list of lessons I've learnt the hard way.</p>
<h1>Enable Termination Protection</h1>
<p>These points aren't in any particular order, but if there is one thing to take away from the post, this is it: Turn on Termination Protection for your EC2 instances!</p>
<p>So once you have your EC2 instance up and running, there are two states you can change it to:</p>
<ul>
<li>Stopped</li>
<li>Terminated</li>
</ul>
<p>Stopping an instance is kind of like the equivalent of shutting down a physical machine; you can get your instance back up and running later. Terminating an instance is kind of like the equivalent of picking up a physical machine and throwing it out the window; you're not going to be able to get it back up and running later.</p>
<p>Unfortunately it is really easy to terminate an instance - right click on it and select 'Terminate'. That's it. No dialog asking you to confirm. No undo button. That instance is dead. This happened to me when I was looking to terminate a certain instance, but didn't realise that I also had another instance selected that was being used in production. When I clicked terminate, they both got killed - and believe me that's not fun!</p>
<p>If you do accidentally terminate a instance, then don't panic. Despite the instance getting killed, the hard drive attached to it remains available so you can launch a new instance to replace it:</p>
<ul>
<li>Click the <img alt="Launch Instance" src="https://images-na.ssl-images-amazon.com/images/G/01/webservices/console/ec2/icon_launchinstances.png" /> Launch Instance Button and go through the wizard choosing the same settings as per your terminated instance (same keypair for SSH access etc). You can use any AMI to launch from, it doesn't matter, because we will be deleting this instances Hard Drive, OS, etc.</li>
<li>Immediately Stop the new instance</li>
<li>Click on the Volumes from the left hand menu. You should see a new Hard Drive attached to the instance we just launched, as well as the hard drive from the instance we accidentally terminated (it will be unattached).</li>
<li>Unattach the Volume from the new instance (you can also delete it as we no longer need it), and attach the other Volume. It will ask for the device name, which may vary depending on your set up. For a default Amazon Linux instance it is /dev/sda1.</li>
<li>Start the instance and all should be good! If you were using an elastic IP, you will need to reattach it and if you are monitoring with Cloudkick (see below) you may need to update your setting in the Cloudkick dashboard.</li>
</ul>
<p>If you make enabling Termination Protection the first thing you do, then hopefully you will never need follow those instructions. Why it isn't enabled by default I don't know!</p>
<h1>Release Unused Elastic IPs</h1>
<p>Elastic IPs allow you to assign a static IP to your instances and they are free. That is they are free, but only provided you are using them. As soon as your Elastic IPs are not assigned to any instances, they will start coming up in your monthly bill. This is a measure from Amazon to stop people hording IPs, since they are in such short supply at the moment.</p>
<p>So if you unassign one of your Elastic IPs and no longer plan to use it, then release it back into the pool. However, note that this means you will no longer be able to get that specific IP back.</p>
<h1>Monitor with CloudKick</h1>
<p><a href="https://www.cloudkick.com/">Cloudkick</a> is an awesome way to monitor the health of your EC2 instances and applications deployed to them. It is also free, so check it out!</p>
<p>At the time of writing Cloudkick is transitioning to Rackspace Cloud Monitoring with Cloudkick dissapearing in a year or two, so watch out for that.</p>
<h1>Name your instances</h1>
<p>In fact name everything you can; Instances, Volumes, Snapshots, AMIs. Naming instances and the such is optional, but if you don't then it becomes some what more difficult picking the right Volume from a drop down list that contains vol-bc5e8dd4, vol-aca11cd and vol-a7fe7de.</p>
<p>To name things:</p>
<ul>
<li>Click the Tags tab</li>
<li>Click the <img alt="Add/Edit Tags" src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/ec2/tags_icon.png" /> Add/Edit Tags button</li>
<li>There should already be a key prepopulated with 'Name'. Just fill in the value. </li>
</ul><p>tags: <a href=".././tag/Amazon.html">Amazon</a>&nbsp;<a href=".././tag/EC2.html">EC2</a>&nbsp;<a href=".././tag/Cloudkick.html">Cloudkick</a>&nbsp;</p>
<p>There are <a href=".././things-i-learnt-about-using-amazon-ec2.html#disqus_thread">comments</a>.</p>
                </article>
                
                    
                
            </aside><!-- /#featured -->
            
        
        
        

    


        <section id="extras" class="body">
        
<!--
        
-->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
            <address id="about" class="vcard">
                <p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.</p>
                <p>Tweaked theme from <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
            </address><!-- /#about -->

        

                
        </footer><!-- /#contentinfo -->


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-30513668-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>



<script type="text/javascript">
    var disqus_shortname = 'justsomedev';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</body>
</html>